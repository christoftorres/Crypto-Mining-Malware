var esprima = require('esprima');
var fs = require('fs');

var file1;
//fs.readFile('./sha256/cryptocoinjs_sha256_sha256.js', 'utf8', function (err,data) {

  fs.readFile('./sha256/emn178_js-sha256_sha256.js', 'utf8', function (err,data) {
  if (err) {
    return console.log(err);
  }
  file1 = esprima.tokenize(data);
  //console.log(esprima.parseScript(data));

  var file2;
  //fs.readFile('./sha256/emn178_js-sha256_sha256.js', 'utf8', function (err,data) {
  fs.readFile('../Miner/JseCoin/load.jsecoin.com.js', 'utf8', function (err,data) {
    if (err) {
      return console.log(err);
    }
    file2 = esprima.tokenize(data);
    //console.log(esprima.parseScript(data));

    var tokens = [];

    for (var i = 0; i < file1.length; i++) {
      for (var j = 0; j < file2.length; j++) {
        //if (file1[i].type != 'Punctuator' && file1[i].type != 'Keyword' && file1[i].value == file2[j].value) {
        if (file1[i].type != 'Punctuator' && file1[i].type != 'Keyword' && tokens.indexOf(file1[i].value) == -1) {
          if (file1[i].type == 'Numeric') {
            if (parseInt(file1[i].value) == parseInt(file2[j].value)) {
              tokens.push(file1[i].value);
              console.log(file1[i]);
            }
          } else {
            if (file1[i].value.toLowerCase() == file2[j].value.toLowerCase()) {
              tokens.push(file1[i].value);
              console.log(file1[i]);
            }
          }
        }
      }
    }
  });
});
